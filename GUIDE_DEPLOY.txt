# ðŸš€ GUIDE DÃ‰PLOIEMENT PHOTOVINTED SAAS

## âœ… C'EST QUOI LES FICHIERS

```
photovinted-saas/
â”œâ”€â”€ main.py                 # Backend FastAPI âœ¨
â”œâ”€â”€ requirements.txt        # DÃ©pendances Python
â”œâ”€â”€ Procfile               # Config Railway
â”œâ”€â”€ .env.example           # Variables d'env
â”‚
â””â”€â”€ frontend/              # App React
    â”œâ”€â”€ app.jsx            # Composant principal
    â”œâ”€â”€ package.json       # DÃ©pendances JS
    â”œâ”€â”€ vite.config.js     # Config build
    â””â”€â”€ index.html         # HTML entrypoint
```

---

## ðŸ  LOCAL - TESTER EN DEV (5 MIN)

### 1ï¸âƒ£ Clone / Setup Backend

```bash
# CrÃ©e dossier
mkdir photovinted-saas
cd photovinted-saas

# Copy main.py, requirements.txt

# Install deps
pip install -r requirements.txt

# CrÃ©e .env
cat > .env << EOF
API_KEY=test_key_12345
STRIPE_SECRET_KEY=sk_test_4eC39HqLyjWDarhtT1l1kKt
EOF

# Lance backend
python main.py
# ou: uvicorn main:app --reload

# â†’ http://localhost:8000
```

### 2ï¸âƒ£ Setup Frontend (terminal NOUVEAU)

```bash
cd frontend

# Copy app.jsx, package.json, vite.config.js, index.html

# Install
npm install

# Dev mode
npm run dev

# â†’ http://localhost:5173
```

### 3ï¸âƒ£ TEST

Ouvre http://localhost:5173 â†’ teste l'upload

âœ… Si Ã§a marche â†’ Continue!

---

## ðŸŒ PRODUCTION - RAILWAY (5 MIN)

### 1ï¸âƒ£ CrÃ©e repo GitHub

```bash
git init
git add .
git commit -m "Initial commit"
git push origin main
```

### 2ï¸âƒ£ Connect Railway

1. VÃ¡ sur https://railway.app
2. Click "New Project"
3. "Deploy from GitHub"
4. Select ton repo
5. Railway auto-dÃ©tecte le Procfile âœ¨

### 3ï¸âƒ£ Configure Env Vars

Dashboard Railway â†’ Variables:

```
API_KEY=ta_clÃ©_api_secrÃ¨te
STRIPE_SECRET_KEY=sk_live_xxxxx
FRONTEND_URL=https://ton-app.railway.app
```

### 4ï¸âƒ£ Deploy Frontend (Vercel)

```bash
cd frontend
npm install
npm run build

# Deploy sur Vercel avec:
# - Build command: npm run build
# - Output: dist
```

**Configure Env Vars Vercel:**
```
VITE_API_URL=https://ton-backend.railway.app
VITE_API_KEY=ta_clÃ©_api
```

---

## ðŸ§ª TEST CURL

```bash
# Upload image
curl -X POST http://localhost:8000/enhance \
  -H "x-api-key: test_key_12345" \
  -F "file=@photo.jpg"

# RÃ©ponse:
# {
#   "status": "success",
#   "filename": "abc123.png",
#   "url": "/image/abc123.png"
# }

# Get image
curl http://localhost:8000/image/abc123.png > result.png
```

---

## ðŸ’° MONÃ‰TISATION (BONUS)

Stripe est dÃ©jÃ  intÃ©grÃ©!

Route: `POST /create-checkout-session`

```python
# Dans app.jsx, ajoute:
const handleUpgrade = async () => {
  const res = await fetch(`${API_URL}/create-checkout-session`, {
    method: "POST",
    headers: { "x-api-key": API_KEY }
  });
  const data = await res.json();
  window.location.href = data.checkout_url;
};
```

---

## âš¡ PROBLÃˆMES COURANTS

**Q: Image ne se gÃ©nÃ¨re pas?**
A: Check firewall / CORS. Log dit quoi?

**Q: CORS error?**
A: Backend CORS est ouvert (*), check frontend URL

**Q: File not found aprÃ¨s upload?**
A: Dossier `output/` n'existe pas? main.py le crÃ©e auto

**Q: Stripe pas marche?**
A: T'as besoin clÃ© API Stripe valide (pas test key en prod)

---

## ðŸ“Š STRUCTURE FINALE

Quand tu dÃ©ploies:

```
Frontend (Vercel)
    â†“
    API Call (Authorization + CORS)
    â†“
Backend (Railway)
    â†“
    Traite image (PIL)
    â†“
    Sauvegarde /output
    â†“
    Retourne URL
    â†“
Frontend affiche image + Download
```

---

## âœ¨ PROCHAINES Ã‰TAPES

1. **Local test** â†’ Valide que Ã§a marche
2. **Github repo** â†’ Push le code
3. **Railway backend** â†’ 5 min deploy
4. **Vercel frontend** â†’ 3 min deploy
5. **Test en prod** â†’ Upload une image
6. **Ajoute Stripe** â†’ MonÃ©tise!

---

## ðŸ“± FICHIERS QU'IL FAUT

```
âœ… main.py
âœ… requirements.txt
âœ… Procfile
âœ… .env (local)
âœ… app.jsx
âœ… package.json
âœ… vite.config.js
âœ… index.html (crÃ©Ã© par Vite)
âœ… input.css (Tailwind)
âœ… .gitignore
```

---

## ðŸŽ¯ TL;DR

1. `pip install -r requirements.txt`
2. `python main.py` (backend)
3. `npm install && npm run dev` (frontend)
4. Test http://localhost:5173
5. Push GitHub
6. Railway + Vercel deploy
7. Test prod URL
8. Done! ðŸš€

Besoin aide? La doc FastAPI: https://fastapi.tiangolo.com
React/Vite: https://vite.dev
